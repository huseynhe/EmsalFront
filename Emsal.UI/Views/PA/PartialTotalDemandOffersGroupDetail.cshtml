@model Emsal.UI.Models.OfferMonitoringViewModel
@using PagedList.Mvc;
@using Emsal.Utility.CustomObjects;

@{
    ViewBag.Title = "Index";
    Layout = "";
}

<h4 class="text-danger text-center">
    <a href="/PA/TotalDemandOffersGroupDetail?productId=@Model.productId&userTypeId=@Model.userTypeId&monthEVId=@Model.monthEVId&finVoen=@Model.finVoen&excell=true" class="btn btn-warning btn-sm active pull-right" style="margin-top: -5px;margin-right:5px;">
        <i class="fa fa-file-excel-o" aria-hidden="true"></i>
        Yüklə
    </a>
</h4>
<div class="clearfix"></div><br />

<div class="table-responsive">
    <div class="col-sm-1 col-sm-offset-11" style="position: absolute;">
        <span class="badge " style="margin-top: -10px; float: right; margin-right: 15px;background:#D43F3A;">@Model.itemCount</span>
    </div>

    <table class="table table-hover table-striped table-bordered">
        <tbody>
            <tr>
                <th class="col-md-2">
                    Satıcı və ya istehsalçının adı
                </th>
                <th class="col-md-1">
                    Satıcı və ya istehsalçının VÖEN-i
                </th>
                <th class="col-md-1">
                    Ölçü vahidi
                </th>
                <th class="col-md-1">
                    Malın həcmi (miqdarı)
                </th>
                <th class="col-md-1">
                    Ümumi dəyər (manatla)
                </th>
                <th class="col-md-2">
                    Satıcı və ya istehsalçının nümayəndəsinin adı
                </th>
                <th class="col-md-1">
                    Satıcı və ya istehsalçının nümayəndəsinin əlaqə vasitəsi
                </th>
                <th class="col-md-1">
                    Tədarükçünün növü (istehsalçı, satıcı və ya idxalçı)
                </th>
            </tr>

            @foreach (var itemo in Model.DemanOfferProductionList)
            {
                <tr>
                    <td class="col-md-2">
                        @if (!string.IsNullOrEmpty(itemo.voen.Trim()))
                        {
                            <span>@itemo.organizationName</span>
                        }
                        else
                        {
                            <span>@itemo.personName @itemo.surname @itemo.fatherName</span>
                        }
                    </td>
                    <td class="col-md-1">
                        @if (!string.IsNullOrEmpty(itemo.pinNumber.Trim()))
                        {
                            <b>FİN: </b>@itemo.pinNumber
                            <div class="clearfix"></div>
                        }
                        @if (!string.IsNullOrEmpty(itemo.voen.Trim()))
                        {
                            <b>VÖEN: </b>@itemo.voen

                        }
                    </td>
                    <td class="col-md-1">
                        @itemo.enumValueName
                    </td>
                    <td class="col-md-1">
                        @Custom.ConverPriceToStringDelZero((decimal)itemo.quantity)
                    </td>
                    <td class="col-md-1">
                        @Custom.ConverPriceToStringDelZero((decimal)itemo.totalQuantityPrice)
                    </td>
                    <td class="col-md-2">
                        @itemo.personName @itemo.surname @itemo.fatherName
                    </td>
                    <td class="col-md-1">
                        @string.Join(", ", itemo.comList.Select(x => x.communication).LastOrDefault())
                    </td>
                    <td class="col-md-1">
                        @itemo.roledesc
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div class="box-footer clearfix">
    Səhifə @(Model.PagingT.PageCount < Model.PagingT.PageNumber ? 0 : Model.PagingT.PageNumber) (cəmi @Model.PagingT.PageCount)
    @Html.PagedListPager(Model.PagingT, page => Url.Action("TotalDemandOffersGroupDetail", new { page, productId = Model.productId, userTypeId = Model.userTypeId, finVoen = Model.finVoen, monthEVId = Model.monthEVId }))
</div>
